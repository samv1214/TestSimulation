<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Food Crisis Simulator - Judge Mode</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background-color: #f4f4f4; }
        .container { background: white; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .controls { margin-bottom: 20px; }
        .button { padding: 10px; margin: 5px; background: #4CAF50; color: white; border: none; cursor: pointer; }
        .button:hover { background: #45a049; }
        .log { max-height: 200px; overflow-y: auto; background: #eee; padding: 10px; border-radius: 5px; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Food Crisis Simulator - Judge Mode</h2>
        
        <div class="controls">
            <label>Food Supply: </label><input type="number" id="foodSupply" value="1000">
            <label>Population: </label><input type="number" id="population" value="1000">
            <label>Growth Rate (%): </label><input type="number" id="growthRate" value="2">
            <button class="button" onclick="startSimulation()">Start</button>
            <button class="button" onclick="pauseSimulation()">Pause</button>
        </div>
        
        <div class="controls">
            <h3>Judge Controls</h3>
            <button class="button" onclick="applyCrisis('drought')">Trigger Drought</button>
            <button class="button" onclick="applyCrisis('war')">Trigger War</button>
            <button class="button" onclick="applyCrisis('aid')">Provide Food Aid</button>
        </div>
        
        <canvas id="chart"></canvas>
        <h3>Event Log</h3>
        <div class="log" id="log"></div>
    </div>
    
    <script>
        let foodSupply = 1000, population = 1000, growthRate = 2, year = 0;
        let running = false;
        let years = [], foodData = [], populationData = [];
        
        const ctx = document.getElementById('chart').getContext('2d');
        const chart = new Chart(ctx, {
            type: 'line',
            data: { labels: years, datasets: [
                { label: 'Food Supply', data: foodData, borderColor: 'red', fill: false },
                { label: 'Population', data: populationData, borderColor: 'blue', fill: false }
            ] },
            options: { responsive: true }
        });
        
        function logEvent(message) {
            document.getElementById('log').innerHTML += `<p>${message}</p>`;
        }
        
        function updateChart() {
            chart.data.labels = years;
            chart.data.datasets[0].data = foodData;
            chart.data.datasets[1].data = populationData;
            chart.update();
        }
        
        function startSimulation() {
            if (!running) {
                running = setInterval(simulateStep, 1000);
            }
        }
        
        function pauseSimulation() {
            clearInterval(running);
            running = false;
        }
        
        function simulateStep() {
            year++;
            population += Math.round(population * (growthRate / 100));
            foodSupply -= population * 0.1;
            
            years.push(year);
            foodData.push(foodSupply);
            populationData.push(population);
            updateChart();
            logEvent(`Year ${year}: Population ${population}, Food Supply ${foodSupply}`);
        }
        
        function applyCrisis(type) {
            if (type === 'drought') {
                foodSupply *= 0.7;
                logEvent('Drought occurred! Food supply reduced.');
            } else if (type === 'war') {
                population *= 0.9;
                foodSupply *= 0.8;
                logEvent('War occurred! Population and food supply reduced.');
            } else if (type === 'aid') {
                foodSupply += 500;
                logEvent('Food aid received! Food supply increased.');
            }
            updateChart();
        }
    </script>
</body>
</html>
